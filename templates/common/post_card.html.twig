<div class="list-group-item list-group-item-action card-timeline post-card" data-post-id="{{ post.id }}" itemscope itemtype="http://schema.org/SocialMediaPosting">
    <div>
        {# == Displays when the post has been reposted #}
        {% if post.sourcePost is not empty %}
            <div><i class="fas fa-retweet"></i>
                <span><a href="{{ path('profile_view', { username: post.sender.username }) }}">{{ post.sender.displayName }}</a> Copyquacked</span>
            </div>
        {% endif %}

        {# This helps prevent duplicating code #}
        {% set realPost = post.sourcePost ?? post %}

        {# == Displays the post content #}
        <div itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a class="post-card__author-name" href="{{ path('profile_view', { username: realPost.sender.username }) }}">
                <strong itemprop="name">{{ realPost.sender.displayName }}</strong>
            </a>
            <span>(@{{ realPost.sender.username }})</span>
        </div>
        <p itemprop="text">{{ realPost.content }}</p>

        {# Displays embedded content if any #}
        {# TODO: Add video/audio support #}

        {% if realPost.mediaUrl is not empty %}
            <a href="{{ asset('upload/post/' ~ realPost.mediaUrl) }}">Link to this image</a>
            <img itemprop="image" class="img-fluid rounded mx-auto d-block" src="{{ asset('upload/post/' ~ realPost.mediaUrl) }}">
        {% endif %}
    </div>
    <div class="my-3">
        <a href="{{ path('view_post', {id: post.id}) }}" class="btn btn-secondary btn-sm" title="Comment">
            <i class="far fa-comment"></i>
            <span>{{ realPost.replies|length }}</span>
        </a>
        <button class="btn btn-secondary btn-sm post-card__repost-btn" title="Copyquack">
            <i class="fas fa-retweet"></i>
            <span>{{ realPost.reposts|length }}</span>
        </button>
        <button class="btn btn-secondary btn-sm post-card__like-btn" title="Like">
            <i class="far fa-heart"></i>
            <span>{{ realPost.favorites|length }}</span>
        </button>
        <button class="btn btn-secondary btn-sm" title="Direct message">
            <i class="far fa-envelope"></i>
        </button>
        {% if app.user is not empty and post.sender.id == app.user.id %}
            <button class="btn btn-danger btn-sm post-card__delete-btn" title="Delete"><i class="far fa-trash-alt"></i></button>
        {% endif %}
    </div>
</div>